---
title: "Data_Analysis_EDBeh_SelfHarm_EDEQ"
author: "Helena Davies"
date: "08/03/2021"
output: html_document
---

```{r Setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      comment=NA,
                      prompt=FALSE,
                      cache=FALSE)
```

Delete everything in your global environment
```{r Delete everything in your global environment}
remove(list = ls())
```

#### Call in library script

```{r source files}
source("./libraries.R")
```

#### Call in functions script

```{r source files}
source("./functions.R")
```


### Read in EDEQ data
```{r}
dat.edeq <- readRDS(file = "../data_cleaned/dat.edeq.rds")

# Inspect dimensions
dim(dat.edeq)
# Inspect colnames
colnames(dat.edeq)

```



##Exclude participants who are missing for EVERY edeq variable (i.e., retroprepan, baseline, and every wave)
```{r}


##Remove participants who have ALL missing data
dat.edeq.all.missing <- dat.edeq %>%
  filter(
           is.na(`edeq.deliberately_limit_amount_influence_baseline`                           ) &
           is.na(`edeq.calories_made_body_shape_baseline`                                     ) &
           is.na(`edeq.weight_influenced_person_baseline`                                      ) &
           is.na(`edeq.dissatisfied_shape_weight_baseline`                                    ) &
           is.na(`edeq.nibbled_picked_snacks_grazed_baseline`                                  ) &
           is.na(`edeq.felt_anxious_blue_bored_baseline`                                      ) &
           is.na(`edeq.felt_anxious_blue_bored.1_baseline`                                     ) &
           is.na(`edeq.eating_behaviours_concerns_distressed_baseline`                        ) &
           is.na(`edeq.deliberately_limit_amount_influence.1_baseline`                         ) &
           is.na(`edeq.calories_made_body_shape.1_baseline`                                   ) &
           is.na(`edeq.weight_influenced_person.1_baseline`                                    ) &
           is.na(`edeq.dissatisfied_shape_weight.1_baseline`                                  ) &
           is.na(`edeq.eating_behaviours_concerns_distressed.1_baseline`                       ) &
           is.na(`edeq.feelings_pandemic_felt_baseline`                                       ) &
           is.na(`edeq.actively_been_monitoring_your_shape_or_weight_baseline`                 ) &
           is.na(`edeq.regard_lost_control_eaten_baseline`                                    ) &
           is.na(`edeq.sick_means_made_shape_baseline`                                         ) &
           is.na(`edeq.diuretics_laxatives_means_shape_baseline`                              ) &
           is.na(`edeq.compulsive_driven_burn_calories_baseline`                               ) &
           is.na(`edeq.nibbled_picked_snacks_grazed.1_baseline`                               ) &
           is.na(`edeq.felt_anxious_blue_bored.2_baseline`                                     ) &
           is.na(`edeq.felt_anxious_blue_bored.3_baseline`                                    ) &
           is.na(`edeq.actively_been_monitoring_your_shape_or_weight_.1_baseline`              ) &
           is.na(`edeq.regard_lost_control_eaten.1_baseline`                                  ) &
           is.na(`edeq.sick_means_made_shape.1_baseline`                                       ) &
           is.na(`edeq.diuretics_laxatives_means_shape.1_baseline`                            ) &
           is.na(`edeq.compulsive_driven_burn_calories.1_baseline`                             ) &
           is.na(`edeq.deliberately_limit_amount_influence_baseline_numeric`                  ) &
           is.na(`edeq.calories_made_body_shape_baseline_numeric`                              ) &
           is.na(`edeq.weight_influenced_person_baseline_numeric`                             ) &
           is.na(`edeq.dissatisfied_shape_weight_baseline_numeric`                             ) &
           is.na(`edeq.nibbled_picked_snacks_grazed_baseline_numeric`                         ) &
           is.na(`edeq.felt_anxious_blue_bored_baseline_numeric`                               ) &
           is.na(`edeq.felt_anxious_blue_bored.1_baseline_numeric`                            ) &
           is.na(`edeq.eating_behaviours_concerns_distressed_baseline_numeric`                 ) &
           is.na(`edeq.deliberately_limit_amount_influence.1_baseline_numeric`                ) &
           is.na(`edeq.calories_made_body_shape.1_baseline_numeric`                            ) &
           is.na(`edeq.weight_influenced_person.1_baseline_numeric`                           ) &
           is.na(`edeq.dissatisfied_shape_weight.1_baseline_numeric`                           ) &
           is.na(`edeq.eating_behaviours_concerns_distressed.1_baseline_numeric`              ) &
           is.na(`edeq.feelings_pandemic_felt_baseline_numeric`                                ) &
           is.na(`edeq.actively_been_monitoring_your_shape_or_weight_baseline_numeric`        ) &
           is.na(`edeq.regard_lost_control_eaten_baseline_numeric`                             ) &
           is.na(`edeq.sick_means_made_shape_baseline_numeric`                                ) &
           is.na(`edeq.diuretics_laxatives_means_shape_baseline_numeric`                       ) &
           is.na(`edeq.compulsive_driven_burn_calories_baseline_numeric`                      ) &
           is.na(`edeq.nibbled_picked_snacks_grazed.1_baseline_numeric`                        ) &
           is.na(`edeq.felt_anxious_blue_bored.2_baseline_numeric`                            ) &
           is.na(`edeq.felt_anxious_blue_bored.3_baseline_numeric`                             ) &
           is.na(`edeq.actively_been_monitoring_your_shape_or_weight_.1_baseline_numeric`     ) &
           is.na(`edeq.regard_lost_control_eaten.1_baseline_numeric`                           ) &
           is.na(`edeq.sick_means_made_shape.1_baseline_numeric`                              ) &
           is.na(`edeq.diuretics_laxatives_means_shape.1_baseline_numeric`                     ) &
           is.na(`edeq.compulsive_driven_burn_calories.1_baseline_numeric`                    ) &
           is.na(`edeq.deliberately_limit_amount_influence_.Wavebaseline`                      ) &
           is.na(`edeq.calories_made_body_shape_.Wavebaseline`                                ) &
           is.na(`edeq.weight_influenced_person_.Wavebaseline`                                 ) &
           is.na(`edeq.dissatisfied_shape_weight_.Wavebaseline`                               ) &
           is.na(`edeq.nibbled_picked_snacks_grazed_.Wavebaseline`       ) &
           is.na(`edeq.felt_anxious_blue_bored_.Wavebaseline`                                 ) &
           is.na(`edeq.felt_anxious_blue_bored.1_.Wavebaseline`                                ) &
           is.na(`edeq.eating_behaviours_concerns_distressed_.Wavebaseline`                   ) &
           is.na(`edeq.deliberately_limit_amount_influence.1_.Wavebaseline`                    ) &
           is.na(`edeq.calories_made_body_shape.1_.Wavebaseline`                              ) &
           is.na(`edeq.weight_influenced_person.1_.Wavebaseline`                               ) &
           is.na(`edeq.dissatisfied_shape_weight.1_.Wavebaseline`                             ) &
           is.na(`edeq.eating_behaviours_concerns_distressed.1_.Wavebaseline`                  ) &
           is.na(`edeq.feelings_pandemic_felt_.Wavebaseline`                                  ) &
           is.na(`edeq.actively_been_monitoring_your_shape_or_weight_.Wavebaseline`            ) &
           is.na(`edeq.regard_lost_control_eaten_.Wavebaseline`                               ) &
           is.na(`edeq.sick_means_made_shape_.Wavebaseline`                                    ) &
           is.na(`edeq.diuretics_laxatives_means_shape_.Wavebaseline`                         ) &
           is.na(`edeq.compulsive_driven_burn_calories_.Wavebaseline`                          ) &
           is.na(`edeq.nibbled_picked_snacks_grazed.1_.Wavebaseline`                          ) &
           is.na(`edeq.felt_anxious_blue_bored.2_.Wavebaseline`                                ) &
           is.na(`edeq.felt_anxious_blue_bored.3_.Wavebaseline`                               ) &
           is.na(`edeq.actively_been_monitoring_your_shape_or_weight_.1_.Wavebaseline`         ) &
           is.na(`edeq.regard_lost_control_eaten.1_.Wavebaseline`                             ) &
           is.na(`edeq.sick_means_made_shape.1_.Wavebaseline`                                  ) &
           is.na(`edeq.diuretics_laxatives_means_shape.1_.Wavebaseline`                       ) &
           is.na(`edeq.compulsive_driven_burn_calories.1_.Wavebaseline`                        ) &
           is.na(`edeq.deliberately_limit_amount_influence_.Wavebaseline_numeric`             ) &
           is.na(`edeq.calories_made_body_shape_.Wavebaseline_numeric`                         ) &
           is.na(`edeq.weight_influenced_person_.Wavebaseline_numeric`                        ) &
           is.na(`edeq.dissatisfied_shape_weight_.Wavebaseline_numeric`                        ) &
           is.na(`edeq.nibbled_picked_snacks_grazed_.Wavebaseline_numeric`                    ) &
           is.na(`edeq.felt_anxious_blue_bored_.Wavebaseline_numeric`                          ) &
           is.na(`edeq.felt_anxious_blue_bored.1_.Wavebaseline_numeric`                       ) &
           is.na(`edeq.eating_behaviours_concerns_distressed_.Wavebaseline_numeric`            ) &
           is.na(`edeq.deliberately_limit_amount_influence.1_.Wavebaseline_numeric`           ) &
           is.na(`edeq.calories_made_body_shape.1_.Wavebaseline_numeric`                       ) &
           is.na(`edeq.weight_influenced_person.1_.Wavebaseline_numeric`                      ) &
           is.na(`edeq.dissatisfied_shape_weight.1_.Wavebaseline_numeric`                      ) &
           is.na(`edeq.eating_behaviours_concerns_distressed.1_.Wavebaseline_numeric`         ) &
           is.na(`edeq.feelings_pandemic_felt_.Wavebaseline_numeric`                           ) &
           is.na(`edeq.actively_been_monitoring_your_shape_or_weight_.Wavebaseline_numeric`   ) &
           is.na(`edeq.regard_lost_control_eaten_.Wavebaseline_numeric`                        ) &
           is.na(`edeq.sick_means_made_shape_.Wavebaseline_numeric`                           ) &
           is.na(`edeq.diuretics_laxatives_means_shape_.Wavebaseline_numeric`             ) &
           is.na(`edeq.compulsive_driven_burn_calories_.Wavebaseline_numeric`                 ) &
           is.na(`edeq.nibbled_picked_snacks_grazed.1_.Wavebaseline_numeric`                   ) &
           is.na(`edeq.felt_anxious_blue_bored.2_.Wavebaseline_numeric`                       ) &
           is.na(`edeq.felt_anxious_blue_bored.3_.Wavebaseline_numeric`                        ) &
           is.na(`edeq.actively_been_monitoring_your_shape_or_weight_.1_.Wavebaseline_numeric`) &
           is.na(`edeq.regard_lost_control_eaten.1_.Wavebaseline_numeric`                      ) &
           is.na(`edeq.sick_means_made_shape.1_.Wavebaseline_numeric`                         ) &
           is.na(`edeq.diuretics_laxatives_means_shape.1_.Wavebaseline_numeric`                ) &
           is.na(`edeq.compulsive_driven_burn_calories.1_.Wavebaseline_numeric`               ) &
           is.na(`edeq.deliberately_limit_amount_influence_.Wave 1b`                           ) &
           is.na(`edeq.deliberately_limit_amount_influence_.Wave 2b`                          ) &
           is.na(`edeq.deliberately_limit_amount_influence_.Wave 3b`                           ) &
           is.na(`edeq.deliberately_limit_amount_influence_.Wave 4b`                          ) &
           is.na(`edeq.deliberately_limit_amount_influence_.Wave 6`                            ) &
           is.na(`edeq.deliberately_limit_amount_influence_.Wave 8`                           ) &
           is.na(`edeq.calories_made_body_shape_.Wave 1b`                                      ) &
           is.na(`edeq.calories_made_body_shape_.Wave 2b`                                     ) &
           is.na(`edeq.calories_made_body_shape_.Wave 3b`             ) &
           is.na(`edeq.calories_made_body_shape_.Wave 4b`                                     ) &
           is.na(`edeq.calories_made_body_shape_.Wave 6`                                       ) &
           is.na(`edeq.calories_made_body_shape_.Wave 8`                                      ) &
           is.na(`edeq.weight_influenced_person_.Wave 1b`                                      ) &
           is.na(`edeq.weight_influenced_person_.Wave 2b`                                     ) &
           is.na(`edeq.weight_influenced_person_.Wave 3b`                                      ) &
           is.na(`edeq.weight_influenced_person_.Wave 4b`                                     ) &
           is.na(`edeq.weight_influenced_person_.Wave 6`                                       ) &
           is.na(`edeq.weight_influenced_person_.Wave 8`                                      ) &
           is.na(`edeq.dissatisfied_shape_weight_.Wave 1b`                                     ) &
           is.na(`edeq.dissatisfied_shape_weight_.Wave 2b`                                    ) &
           is.na(`edeq.dissatisfied_shape_weight_.Wave 3b`                                     ) &
           is.na(`edeq.dissatisfied_shape_weight_.Wave 4b`                                    ) &
           is.na(`edeq.dissatisfied_shape_weight_.Wave 6`                                      ) &
           is.na(`edeq.dissatisfied_shape_weight_.Wave 8`                                     ) &
           is.na(`edeq.eating_behaviours_distressed_concerns_.Wave 1b`                         ) &
           is.na(`edeq.eating_behaviours_distressed_concerns_.Wave 2b`                        ) &
           is.na(`edeq.eating_behaviours_distressed_concerns_.Wave 3b`                         ) &
           is.na(`edeq.eating_behaviours_distressed_concerns_.Wave 4b`                        ) &
           is.na(`edeq.eating_behaviours_distressed_concerns_.Wave 6`                          ) &
           is.na(`edeq.eating_behaviours_distressed_concerns_.Wave 8`                         ) &
           is.na(`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 1b`                 ) &
           is.na(`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 2b`                ) &
           is.na(`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 3b`     ) &
           is.na(`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 4b`                ) &
           is.na(`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 6`                  ) &
           is.na(`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 8`                 ) &
           is.na(`edeq.regard_lost_control_eaten_numeric_.Wave 1b`                                     ) &
           is.na(`edeq.regard_lost_control_eaten_numeric_.Wave 2b`                                    ) &
           is.na(`edeq.regard_lost_control_eaten_numeric_.Wave 3b`                                     ) &
           is.na(`edeq.regard_lost_control_eaten_numeric_.Wave 4b`                                    ) &
           is.na(`edeq.regard_lost_control_eaten_numeric_.Wave 6`                                      ) &
           is.na(`edeq.regard_lost_control_eaten_numeric_.Wave 8`                                     ) &
           is.na(`edeq.sick_means_made_shape_numeric_.Wave 1b`                                         ) &
           is.na(`edeq.sick_means_made_shape_numeric_.Wave 2b`                                        ) &
           is.na(`edeq.sick_means_made_shape_numeric_.Wave 3b`                                         ) &
           is.na(`edeq.sick_means_made_shape_numeric_.Wave 4b`                                        ) &
           is.na(`edeq.sick_means_made_shape_numeric_.Wave 6`                                          ) &
           is.na(`edeq.sick_means_made_shape_numeric_.Wave 8`                                         ) &
           is.na(`edeq.diuretics_laxatives_means_shape_numeric_.Wave 1b`                               ) &
           is.na(`edeq.diuretics_laxatives_means_shape_numeric_.Wave 2b`                              ) &
           is.na(`edeq.diuretics_laxatives_means_shape_numeric_.Wave 3b`                               ) &
           is.na(`edeq.diuretics_laxatives_means_shape_numeric_.Wave 4b`                              ) &
           is.na(`edeq.diuretics_laxatives_means_shape_numeric_.Wave 6`                                ) &
           is.na(`edeq.diuretics_laxatives_means_shape_numeric_.Wave 8`                               ) &
           is.na(`edeq.compulsive_driven_burn_calories_numeric_.Wave 1b`                               ) &
           is.na(`edeq.compulsive_driven_burn_calories_numeric_.Wave 2b`                              ) &
           is.na(`edeq.compulsive_driven_burn_calories_numeric_.Wave 3b`                               ) &
           is.na(`edeq.compulsive_driven_burn_calories_numeric_.Wave 4b`                              ) &
           is.na(`edeq.compulsive_driven_burn_calories_numeric_.Wave 6`                                ) &
           is.na(`edeq.compulsive_driven_burn_calories_numeric_.Wave 8`                               ) &
           is.na(`edeq.nibbled_picked_snacks_grazed_.Wave 1b`                                  ) &
           is.na(`edeq.nibbled_picked_snacks_grazed_.Wave 2b`                                 ) &
           is.na(`edeq.nibbled_picked_snacks_grazed_.Wave 3b`                                  ) &
           is.na(`edeq.nibbled_picked_snacks_grazed_.Wave 4b`                                 ) &
           is.na(`edeq.nibbled_picked_snacks_grazed_.Wave 6`                                   ) &
           is.na(`edeq.nibbled_picked_snacks_grazed_.Wave 8`                                  ) &
           is.na(`edeq.felt_anxious_blue_bored_.Wave 1b`                                       ) &
           is.na(`edeq.felt_anxious_blue_bored_.Wave 2b`                                      ) &
           is.na(`edeq.felt_anxious_blue_bored_.Wave 3b`                                       ) &
           is.na(`edeq.felt_anxious_blue_bored_.Wave 4b`                                      ) &
           is.na(`edeq.felt_anxious_blue_bored_.Wave 6`                                        ) &
           is.na(`edeq.felt_anxious_blue_bored_.Wave 8`                                       ) &
           is.na(`edeq.felt_anxious_blue_bored.1_.Wave 1b`                                     ) &
           is.na(`edeq.felt_anxious_blue_bored.1_.Wave 2b`                                    ) &
           is.na(`edeq.felt_anxious_blue_bored.1_.Wave 3b`                                     ) &
           is.na(`edeq.felt_anxious_blue_bored.1_.Wave 4b`                                    ) &
           is.na(`edeq.felt_anxious_blue_bored.1_.Wave 6`                                      ) &
           is.na(`edeq.felt_anxious_blue_bored.1_.Wave 8` ))
             


nrow(dat.edeq.all.missing)

```

```{r}
##Filter out those with ALL missing data in main dataset
'%!in%' <- function(x,y)!('%in%'(x,y))

dat.edeq <- dat.edeq %>%
  filter(ID %!in% dat.edeq.all.missing$ID)

nrow(dat.edeq) ##TOTAL == 7459

```

# Colour palettes
Define colours for plotting this are the standard coping colours
```{r Colour palettes: COPING}
COPINGpalette2 <- c("#78D9C5",
                    "#F5BE5E")
COPINGpalette3 <- c("#78D9C5",
                    "#F5BE5E",
                    "#EEB6E9")
COPINGpalette4 <- c("#78D9C5",
                    "#F5BE5E",
                    "#EEB6E9",
                    "#DBDB73")
COPINGpalette5 <- c("#78D9C5",
                    "#F5BE5E",
                    "#EEB6E9",
                    "#DBDB73",
                    "#FFED98")
COPINGpalette6 <- c("#78D9C5",
                    "#F5BE5E",
                    "#EEB6E9",
                    "#DBDB73",
                    "#FFED98",
                    "#BFD2EB")
COPINGpalette7 <- c("#78D9C5",
                    "#F5BE5E",
                    "#EEB6E9",
                    "#DBDB73",
                    "#FFED98",
                    "#BFD2EB",
                    "#808080")
COPINGpaletteGRAD <- c("#F5BE5E",
                       "#FFD284",
                       "#FFEED1",
                       "#B5B5B5",
                       "#DEFFF8",
                       "#94F6E1",
                       "#78D9C5")
COPINGNeuCenterpalette <- c("#78D9C5",
                            "#808080",
                            "#F5BE5E")
RAMPworseGRADpalette <- c("#78D9C5",
                          "#FFEED1",
                          "#F5BE5E",
                          "#FFB1B5")
GLADpalette = c("#efc00b",
                "#b7dee8")
```

Choose in this chunk which palette to use
04.07.2020 - Default to 2 colour COPING palette
```{r Choose colour palette}
palette = COPINGpalette2
```

# ggplot theme
Set up ggplot theme for the plots
```{r ggplot theme}
theme_personal <-  theme(
    text = element_text(color = "black"),
    axis.title = element_text(color = "black"),
    axis.text = element_text(color = "black"),
    axis.title.y = element_blank(),
    legend.background = element_blank(),
    legend.box.background = element_blank(),
    panel.background = element_blank(),
    panel.grid.minor.x = element_blank(),
    panel.grid.major.x = element_line(
      colour = "gray",
      linetype = "dashed",
      size = 0.2
      ),
    axis.ticks = element_blank()
    )
```




##EDEQ

*****
"PRE-PANDEMIC" [retrospective] EDEQ BASELINE-SPECIFIC QUESTIONS (*NB: Baseline questions also asks about "Over the past 28 days...")

1. edeq.deliberately_limit_amount_influence.1_baseline
= On how many of the 28 days BEFORE THE PANDEMIC: Have you been deliberately trying to limit the amount of food you eat to influence your shape or weight ?

2. edeq.calories_made_body_shape.1_baseline
= On how many of the 28 days BEFORE THE PANDEMIC: Has thinking about body shape, weight, food, eating, or calories made it very difficult to concentrate on things you are interested in ?

3. edeq.weight_influenced_person.1_baseline
= Over the 28 days BEFORE THE PANDEMIC: Has your weight influenced how you think about yourself as a person?

4. edeq.dissatisfied_shape_weight.1_baseline
= Over the 28 days BEFORE THE PANDEMIC: How dissatisfied have you been with your weight or shape?

5. edeq.eating_behaviours_concerns_distressed.1_baseline
= Over the 28 days BEFORE THE PANDEMIC: How distressed have you been by your eating behaviours, the measures you've taken to control your weight, or concerns about your weight and shape?

6. edeq.feelings_pandemic_felt_baseline [ONLY ONE NOT ASKED IN FOLLOW UP]
= How different are these feelings to how you felt before the pandemic?

7. edeq.nibbled_picked_snacks_grazed.1_baseline
= On how many of the past 28 days BEFORE THE PANDEMIC: Picked at, nibbled, or grazed food repeatedly outside of planned meals and snacks?

8. edeq.felt_anxious_blue_bored.2_baseline
= On how many of the past 28 days BEFORE THE PANDEMIC: Eaten more than usual because you felt anxious, blue, bored, frustrated or lonely?
 
9.  edeq.felt_anxious_blue_bored.3_baseline
= On how many of the past 28 days BEFORE THE PANDEMIC: Eaten less than usual because you felt anxious, blue, bored, frustrated or lonely?

10.  edeq.actively_been_monitoring_your_shape_or_weight_.1_baseline
= Over the past 28 days BEFORE PANDEMIC, how many times have you: Actively been monitoring your shape or weight ?

11.  edeq.regard_lost_control_eaten.1_baseline
= Over the past 28 days BEFORE PANDEMIC, how many times have you:Eaten what other people would regard as an unusually large amount of food with a sense of having lost control over your eating?

12.  edeq.sick_means_made_shape.1_baseline =
Over the past 28 days BEFORE PANDEMIC, how many times have you:Made yourself sick as a means of controlling your shape or weight?
 
13. edeq.diuretics_laxatives_means_shape.1_baseline
= Over the past 28 days BEFORE PANDEMIC, how many times have you: Taken laxatives, diuretics, or diet pills as a means of controlling your shape or weight?
 
 14. edeq.compulsive_driven_burn_calories.1_baseline
= Over the past 28 days BEFORE PANDEMIC, how many times have you: Exercised in a “driven” or “compulsive” way as a means of controlling your weight, shape, or amount of fat, or to burn off calories?


*****
BASELINE + WAVES EDEQ QUESTIONS

1. edeq.deliberately_limit_amount_influence_X 
= On how many of the past 28 days: Have you been deliberately trying to limit the amount of food you eat to influence your shape or weight ?

2. edeq.calories_made_body_shape_X 
= On how many of the past 28 days: Has thinking about body shape, weight, food, eating, or calories made it very difficult to concentrate on things you are interested in ?

3. edeq.weight_influenced_person_baseline
= Over the past 28 days: Has your weight influenced how you think about yourself as a person?

4. edeq.dissatisfied_shape_weight_baseline
= Over the past 28 days: How dissatisfied have you been with your weight or shape?

5. edeq.nibbled_picked_snacks_grazed_baseline
= Over the past 28 days, on how many days have you: Picked at, nibbled, or grazed food repeatedly outside of planned meals and snacks?

6. edeq.felt_anxious_blue_bored_baseline
= Over the past 28 days, on how many days have you: Eaten more than usual because you felt anxious, blue, bored, frustrated or lonely?

7. edeq.felt_anxious_blue_bored.1_baseline
= Over the past 28 days, on how many days have you: Have you eaten less than usual because you felt anxious, blue, bored, frustrated or lonely?

8. edeq.eating_behaviours_concerns_distressed_baseline
= Over the past 28 days: How distressed have you been by your eating behaviours, the measures you've taken to control your weight, or concerns about your weight and shape?

9. edeq.actively_been_monitoring_your_shape_or_weight_baseline 
= Over the past 28 days, how many times per day have you: Actively been monitoring your shape or weight ?

10. edeq.regard_lost_control_eaten_baseline
= Over the past 28 days, how many times per day have you:Eaten what other people would regard as an unusually large amount of food with a sense of having lost control over your eating?

11. edeq.sick_means_made_shape_baseline
= Over the past 28 days, how many times per day have you: Made yourself sick as a means of controlling your shape or weight?

12. edeq.diuretics_laxatives_means_shape_baseline
= Over the past 28 days, how many times per day have you: Taken laxatives, diuretics, or diet pills as a means of controlling your shape or weight?

13. edeq.compulsive_driven_burn_calories_baseline
= Over the past 28 days, how many times per day have you: Exercised in a “driven” or “compulsive” way as a means of controlling your weight, shape, or amount of fat, or to burn off calories?


****
NB: ONLY RAMP HAS 'RETROSPECTIVE PREPAN' and BASELINE EDEQ
CATEGORIES - distress?
Should split Qs into categories:

1) Restricting

A. deliberately trying to limit the amount of food you eat to influence your shape or weight 
edeq.deliberately_limit_amount_influence.1 (retro prepan)
edeq.deliberately_limit_amount_influence_X (baseline and waves)

B.Eaten less than usual because you felt anxious, blue, bored, frustrated or lonely?
edeq.felt_anxious_blue_bored.3_ (retro prepan)
edeq.felt_anxious_blue_bored.1 (baseline and waves)

2) Compensating
A. Made yourself sick as a means of controlling your shape or weight?
edeq.sick_means_made_shape.1 (retro prepan)
edeq.sick_means_made_shape_X (baseline and waves)

B. Taken laxatives, diuretics, or diet pills as a means of controlling your shape or weight?
edeq.diuretics_laxatives_means_shape.1  (retro prepan)
edeq.diuretics_laxatives_means_shape_x (baseline and waves)

C. Exercised in a “driven” or “compulsive” way as a means of controlling your weight, shape, or amount of fat, or to burn off calories?
edeq.compulsive_driven_burn_calories.1  (retro prepan)
edeq.compulsive_driven_burn_calories_X (baseline and waves)

3) Bingeing behaviour (eating more)

A. Picked at, nibbled, or grazed food repeatedly outside of planned meals and snacks?
edeq.nibbled_picked_snacks_grazed.1 (retro prepan)
edeq.nibbled_picked_snacks_grazed_X (baseline and waves)

B. Eaten more than usual because you felt anxious, blue, bored, frustrated or lonely?
edeq.felt_anxious_blue_bored.2 (retro prepan)
edeq.felt_anxious_blue_bored_X (baseline and waves)

c. Eaten what other people would regard as an unusually large amount of food with a sense of having lost control over your eating?
edeq.regard_lost_control_eaten.1 (retro prepan)
edeq.regard_lost_control_eaten_X  (baseline and waves)

4) Body dissatisfaction / cognitive

A. Has thinking about body shape, weight, food, eating, or calories made it very difficult to concentrate on things you are interested in ?
edeq.calories_made_body_shape.1 (retro prepan)
edeq.calories_made_body_shape_X (baseline and waves)

B. Has your weight influenced how you think about yourself as a person?
edeq.weight_influenced_person.1 (retro prepan)
edeq.weight_influenced_person)X (baseline and waves)

C. How dissatisfied have you been with your weight or shape?
edeq.dissatisfied_shape_weight.1 (retro prepan)
edeq.dissatisfied_shape_weight_X (baseline and waves)

D. Actively been monitoring your shape or weight?
edeq.actively_been_monitoring_your_shape_or_weight_.1 (retro prepan)
edeq.actively_been_monitoring_your_shape_or_weight_X (baseline and waves)


ALSO - DISTRESS

How distressed have you been by your eating behaviours, the measures you've taken to control your weight, or concerns about your weight and shape?
edeq.eating_behaviours_concerns_distressed.1 (retro prepan)
edeq.eating_behaviours_concerns_distressed_X (baseline and waves)

##Rename retro prepandemic variable names in EDEQ

##***NEED NUMERIC VERSIONS FOR:
edeq.actively_been_monitoring_your_shape_or_weight_.Wavebaseline_numeric
edeq.regard_lost_control_eaten_.Wavebaseline_numeric
edeq.sick_means_made_shape_.Wavebaseline_numeric
edeq.diuretics_laxatives_means_shape_.Wavebaseline_numeric
edeq.compulsive_driven_burn_calories_.Wavebaseline_numeric

NB:

retroprepan 
edeq.felt_anxious_blue_bored.2 = eaten more
edeq.felt_anxious_blue_bored.3 = eaten less


BASELINE:
edeq.felt_anxious_blue_bored.1 = Eaten less
edeq.felt_anxious_blue_bored = eaten MORE

WAVES: 
edeq.felt_anxious_blue_bored.1 = eaten LESS
edeq.felt_anxious_blue_bored = eaten MORE
```{r}
dat.edeq <- dat.edeq %>% 
  rename(
    #Rename retro prepan waves to be consistent with all wave names
    edeq.sick_means_made_shape_numeric_.Waveretro_prepan = edeq.sick_means_made_shape.1_.Wavebaseline_numeric,
    edeq.felt_anxious_blue_bored.1_.Waveretro_prepan = edeq.felt_anxious_blue_bored.3_.Wavebaseline,
    edeq.diuretics_laxatives_means_shape_numeric_.Waveretro_prepan= edeq.diuretics_laxatives_means_shape.1_.Wavebaseline_numeric,
    edeq.compulsive_driven_burn_calories_numeric_.Waveretro_prepan = edeq.compulsive_driven_burn_calories.1_.Wavebaseline_numeric,
    edeq.nibbled_picked_snacks_grazed_.Waveretro_prepan = edeq.nibbled_picked_snacks_grazed.1_.Wavebaseline,
    edeq.felt_anxious_blue_bored_.Waveretro_prepan = edeq.felt_anxious_blue_bored.2_.Wavebaseline,
    edeq.regard_lost_control_eaten_numeric_.Waveretro_prepan = edeq.regard_lost_control_eaten.1_.Wavebaseline_numeric,
    edeq.calories_made_body_shape_.Waveretro_prepan = edeq.calories_made_body_shape.1_.Wavebaseline,
    edeq.weight_influenced_person_.Waveretro_prepan = edeq.weight_influenced_person.1_.Wavebaseline,
    edeq.dissatisfied_shape_weight_.Waveretro_prepan = edeq.dissatisfied_shape_weight.1_.Wavebaseline,
    edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Waveretro_prepan = edeq.actively_been_monitoring_your_shape_or_weight_.1_.Wavebaseline_numeric,
    edeq.eating_behaviours_distressed_concerns_.Waveretro_prepan = edeq.eating_behaviours_concerns_distressed.1_.Wavebaseline,
    edeq.deliberately_limit_amount_influence_.Waveretro_prepan = edeq.deliberately_limit_amount_influence.1_.Wavebaseline,
    
    ##Rename all baseline waves to be consistent with wave names
    edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wavebaseline = edeq.actively_been_monitoring_your_shape_or_weight_.Wavebaseline_numeric,
    edeq.regard_lost_control_eaten_numeric_.Wavebaseline = edeq.regard_lost_control_eaten_.Wavebaseline_numeric,
    edeq.sick_means_made_shape_numeric_.Wavebaseline = edeq.sick_means_made_shape_.Wavebaseline_numeric,
    edeq.diuretics_laxatives_means_shape_numeric_.Wavebaseline = edeq.diuretics_laxatives_means_shape_.Wavebaseline_numeric,
    edeq.compulsive_driven_burn_calories_numeric_.Wavebaseline = edeq.compulsive_driven_burn_calories_.Wavebaseline_numeric,
    edeq.nibbled_picked_snacks_grazed_.Wavebaseline = edeq.nibbled_picked_snacks_grazed_.Wavebaseline,
    edeq.felt_anxious_blue_bored_.Wavebaseline = edeq.felt_anxious_blue_bored_.Wavebaseline,
    edeq.calories_made_body_shape_.Wavebaseline = edeq.calories_made_body_shape_.Wavebaseline,
    edeq.weight_influenced_person_.Wavebaseline = edeq.weight_influenced_person_.Wavebaseline,
    edeq.dissatisfied_shape_weight_.Wavebaseline = edeq.dissatisfied_shape_weight_.Wavebaseline,
    edeq.eating_behaviours_distressed_concerns_.Wavebaseline = edeq.eating_behaviours_concerns_distressed_.Wavebaseline,
    edeq.felt_anxious_blue_bored.1_.Wavebaseline = edeq.felt_anxious_blue_bored.1_.Wavebaseline,
    edeq.deliberately_limit_amount_influence_.Wavebaseline = edeq.deliberately_limit_amount_influence_.Wavebaseline


)

```

##Get rid of non-numeric versions of edeq variables
```{r}

dat.edeq <- dat.edeq %>%
  select(-c(edeq.actively_been_monitoring_your_shape_or_weight_.Wavebaseline,
            edeq.actively_been_monitoring_your_shape_or_weight_.1_.Wavebaseline,
            edeq.regard_lost_control_eaten_.Wavebaseline,
            edeq.regard_lost_control_eaten.1_.Wavebaseline,
            edeq.sick_means_made_shape_.Wavebaseline,
            edeq.sick_means_made_shape.1_.Wavebaseline,
            edeq.diuretics_laxatives_means_shape_.Wavebaseline,
            edeq.diuretics_laxatives_means_shape.1_.Wavebaseline,
            edeq.compulsive_driven_burn_calories_.Wavebaseline,
            edeq.compulsive_driven_burn_calories.1_.Wavebaseline,
            edeq.feelings_pandemic_felt_.Wavebaseline))



```

##PLOTS - EDEQ 
1. Need to select variables to use (don't want _numeric ones in there as then can't re-structure the data)
##Variables that have been made numeric AFTER data cleaning
```{r}

dat.edeq.long.prep1 <- dat.edeq %>% 
  select(!contains(".Wavebaseline_numeric"))

dat.edeq.long.prep2 <- dat.edeq.long.prep1 %>% 
  select(!contains("baseline_numeric"))

 colnames(dat.edeq.long.prep2) 
 
```
 
```{r}
names(dat.edeq)
```
 
 
 
```{r}

dat.edeq <- dat.edeq %>%
  select(
    ID,                                                                                                                                            
         sex,
         cohort_name,
         gender_unc,  
         current_country, 
         uk_location,
         age_category,
         age_category_numeric,
         highest_education_prepan_numeric,
         highest_education_numeric,
         employment_prior_covid,
         ethnicity,  
         key_worker, 
         employment_change, 
         highest_education_prepan,                                                                                                        
         highest_education,                                                                                                                  
         employment_prior_covid_numeric,                                                                                                         
         employment_change_numeric,                                                                                                                     
         key_worker_numeric,   
         control,                                                                     
         control_numeric,
         mhd.other_eating_disorder_numeric,
         depressive_disorders_numeric,
         eating_disorders_numeric,
         anxiety_disorders_numeric, 
         psychotic_disorders_numeric,
         mhd.suspected_eating_disorder_diagnosed_numeric,
         obsessive_compulsive_disorders_numeric,
         mhd.anorexia_nervosa_numeric,
         mhd.bulimia_nervosa_numeric,
         mhd.attention_deficit_hyperactivity_disorder_numeric,
         mhd.posttraumatic_stress_disorder_ptsd_numeric,
         mhd.bingeeating_disorder_numeric,
         mhd.purging_disorder_numeric,
         mhd.mania_hypomania_bipolar_or_manicdepression_numeric,                                                     
         autism_spectrum_disorder_numeric,                                                                     
         mhd.personality_disorder_numeric,                                                                          
         mhd.body_dysmorphic_disorder_bdd_numeric,                                                                                     
         mhd.atypical_anorexia_nervosa_numeric,                                                                                         
         mhd.atypical_bulimia_nervosa_numeric,
         mhd.pica_numeric,
         mhd.rumination_disorder_numeric,
         mhd.atypical_bingeeating_disorder_numeric,                                                                                    
         mhd.night_eating_syndrome_numeric,                                                                                                        
         mhd.avoidantrestrictive_food_intake_disorder_numeric,                                                                      
         mhd.feeding_eating_disorder_numeric,
    `edeq.deliberately_limit_amount_influence_.Waveretro_prepan`,                                            
         `edeq.deliberately_limit_amount_influence_.Wavebaseline`,  
         `edeq.deliberately_limit_amount_influence_.Wave 1b`,                          
         `edeq.deliberately_limit_amount_influence_.Wave 2b`,
         `edeq.deliberately_limit_amount_influence_.Wave 3b`, 
         `edeq.deliberately_limit_amount_influence_.Wave 4b`,                                                    
         `edeq.deliberately_limit_amount_influence_.Wave 8`,  
         `edeq.deliberately_limit_amount_influence_.Wave 6`,
         `edeq.calories_made_body_shape_.Waveretro_prepan`,  
         `edeq.calories_made_body_shape_.Wavebaseline`,                                
         `edeq.calories_made_body_shape_.Wave 1b`,                                     
         `edeq.calories_made_body_shape_.Wave 2b`,                                                                          
         `edeq.calories_made_body_shape_.Wave 4b`,
         `edeq.calories_made_body_shape_.Wave 8`, 
         `edeq.calories_made_body_shape_.Wave 3b`,
         `edeq.calories_made_body_shape_.Wave 6`,
         `edeq.weight_influenced_person_.Waveretro_prepan`,
         `edeq.weight_influenced_person_.Wavebaseline`, 
         `edeq.weight_influenced_person_.Wave 1b`,                                     
         `edeq.weight_influenced_person_.Wave 2b`, 
         `edeq.weight_influenced_person_.Wave 3b`,  
         `edeq.weight_influenced_person_.Wave 4b`,                                                                            
         `edeq.weight_influenced_person_.Wave 8`,
         `edeq.weight_influenced_person_.Wave 6`,
         `edeq.dissatisfied_shape_weight_.Waveretro_prepan`, 
         `edeq.dissatisfied_shape_weight_.Wavebaseline`, 
         `edeq.dissatisfied_shape_weight_.Wave 3b`,
         `edeq.dissatisfied_shape_weight_.Wave 1b`,                                    
         `edeq.dissatisfied_shape_weight_.Wave 2b`,                                                                         
         `edeq.dissatisfied_shape_weight_.Wave 4b`,                                                                          
         `edeq.dissatisfied_shape_weight_.Wave 8`, 
         `edeq.dissatisfied_shape_weight_.Wave 6`,
         `edeq.eating_behaviours_distressed_concerns_.Waveretro_prepan`,       
         `edeq.eating_behaviours_distressed_concerns_.Wavebaseline`,
         `edeq.eating_behaviours_distressed_concerns_.Wave 1b`,                        
         `edeq.eating_behaviours_distressed_concerns_.Wave 2b`,
         `edeq.eating_behaviours_distressed_concerns_.Wave 3b`,
         `edeq.eating_behaviours_distressed_concerns_.Wave 4b`,
         `edeq.eating_behaviours_distressed_concerns_.Wave 6`,
         `edeq.eating_behaviours_distressed_concerns_.Wave 8`,
         `edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Waveretro_prepan`,                  
         `edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wavebaseline`,   
         `edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 1b`,        
         `edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 2b`, 
         `edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 3b`,
         `edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 4b`,
         `edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 6`,
         `edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 8`,
         `edeq.regard_lost_control_eaten_numeric_.Waveretro_prepan`,  
         `edeq.regard_lost_control_eaten_numeric_.Wavebaseline`,                                                 
         `edeq.regard_lost_control_eaten_numeric_.Wave 1b`,                            
         `edeq.regard_lost_control_eaten_numeric_.Wave 2b`, 
         `edeq.regard_lost_control_eaten_numeric_.Wave 3b`,
         `edeq.regard_lost_control_eaten_numeric_.Wave 4b`,
         `edeq.regard_lost_control_eaten_numeric_.Wave 6`,
         `edeq.regard_lost_control_eaten_numeric_.Wave 8`,
         `edeq.sick_means_made_shape_numeric_.Waveretro_prepan`,                             
         `edeq.sick_means_made_shape_numeric_.Wavebaseline`,  
         `edeq.sick_means_made_shape_numeric_.Wave 1b`,                                
         `edeq.sick_means_made_shape_numeric_.Wave 2b`,
         `edeq.sick_means_made_shape_numeric_.Wave 3b`,
         `edeq.sick_means_made_shape_numeric_.Wave 4b`,
         `edeq.sick_means_made_shape_numeric_.Wave 6`,                                 
         `edeq.sick_means_made_shape_numeric_.Wave 8`,
         `edeq.diuretics_laxatives_means_shape_numeric_.Waveretro_prepan`,       
         `edeq.diuretics_laxatives_means_shape_numeric_.Wavebaseline`, 
         `edeq.diuretics_laxatives_means_shape_numeric_.Wave 1b`,                      
         `edeq.diuretics_laxatives_means_shape_numeric_.Wave 2b`,
         `edeq.diuretics_laxatives_means_shape_numeric_.Wave 3b`,
         `edeq.diuretics_laxatives_means_shape_numeric_.Wave 4b`,
         `edeq.diuretics_laxatives_means_shape_numeric_.Wave 6`,
         `edeq.diuretics_laxatives_means_shape_numeric_.Wave 8`,
         `edeq.compulsive_driven_burn_calories_numeric_.Waveretro_prepan`,
         `edeq.compulsive_driven_burn_calories_numeric_.Wavebaseline`, 
         `edeq.compulsive_driven_burn_calories_numeric_.Wave 1b`,                      
         `edeq.compulsive_driven_burn_calories_numeric_.Wave 2b`,
         `edeq.compulsive_driven_burn_calories_numeric_.Wave 3b`,
         `edeq.compulsive_driven_burn_calories_numeric_.Wave 4b`,
         `edeq.compulsive_driven_burn_calories_numeric_.Wave 6`,
         `edeq.compulsive_driven_burn_calories_numeric_.Wave 8`,
         `edeq.nibbled_picked_snacks_grazed_.Waveretro_prepan`,                                                   
         `edeq.nibbled_picked_snacks_grazed_.Wavebaseline`,    
         `edeq.nibbled_picked_snacks_grazed_.Wave 1b`,                                 
         `edeq.nibbled_picked_snacks_grazed_.Wave 2b`, 
         `edeq.nibbled_picked_snacks_grazed_.Wave 3b`,
         `edeq.nibbled_picked_snacks_grazed_.Wave 4b`,
         `edeq.nibbled_picked_snacks_grazed_.Wave 6`,
         `edeq.nibbled_picked_snacks_grazed_.Wave 8`,
         `edeq.felt_anxious_blue_bored.1_.Waveretro_prepan`,     
         `edeq.felt_anxious_blue_bored.1_.Wavebaseline`,                                  
         `edeq.felt_anxious_blue_bored.1_.Wave 1b`,                                    
         `edeq.felt_anxious_blue_bored.1_.Wave 2b`,
         `edeq.felt_anxious_blue_bored.1_.Wave 3b`,
         `edeq.felt_anxious_blue_bored.1_.Wave 4b`, 
         `edeq.felt_anxious_blue_bored.1_.Wave 6`,
         `edeq.felt_anxious_blue_bored.1_.Wave 8`,
         `edeq.felt_anxious_blue_bored_.Wavebaseline`,     
         `edeq.felt_anxious_blue_bored_.Waveretro_prepan`,  
         `edeq.felt_anxious_blue_bored_.Wave 1b`,                                      
         `edeq.felt_anxious_blue_bored_.Wave 2b`,
         `edeq.felt_anxious_blue_bored_.Wave 3b`,
         `edeq.felt_anxious_blue_bored_.Wave 4b`,
         `edeq.felt_anxious_blue_bored_.Wave 6`,
         `edeq.felt_anxious_blue_bored_.Wave 8`)
  
                              
```
 

 ##Change numerics to factor for restructuring to long       
```{r}
dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Waveretro_prepan` <- as.factor(dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Waveretro_prepan`)                 
         
dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wavebaseline` <- as.factor(dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wavebaseline`)                 

dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 1b` <- as.factor(dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 1b`)                 

dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 2b` <- as.factor(dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 2b`)                 

dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 3b` <- as.factor(dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 3b`)                 

dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 4b` <- as.factor(dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 4b`)                 

dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 6` <- as.factor(dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 6`)                 

dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 8` <- as.factor(dat.edeq$`edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 8`)                 

dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Waveretro_prepan` <- as.factor(dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Waveretro_prepan`)                 

dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Wavebaseline` <- as.factor(dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Wavebaseline`) 

dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Wave 1b` <- as.factor(dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Wave 1b`)    

dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Wave 2b` <- as.factor(dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Wave 2b`)                 

dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Wave 3b` <- as.factor(dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Wave 3b`)                 

dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Wave 4b` <- as.factor(dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Wave 4b`)                 

dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Wave 6` <- as.factor(dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Wave 6`)                 

dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Wave 8` <- as.factor(dat.edeq$`edeq.regard_lost_control_eaten_numeric_.Wave 8`)                 

dat.edeq$`edeq.sick_means_made_shape_numeric_.Waveretro_prepan` <- as.factor(dat.edeq$`edeq.sick_means_made_shape_numeric_.Waveretro_prepan`)                 

dat.edeq$`edeq.sick_means_made_shape_numeric_.Wavebaseline` <- as.factor(dat.edeq$`edeq.sick_means_made_shape_numeric_.Wavebaseline`)                 

dat.edeq$`edeq.sick_means_made_shape_numeric_.Wave 1b` <- as.factor(dat.edeq$`edeq.sick_means_made_shape_numeric_.Wave 1b`)  

dat.edeq$`edeq.sick_means_made_shape_numeric_.Wave 2b` <- as.factor(dat.edeq$`edeq.sick_means_made_shape_numeric_.Wave 2b`)      

dat.edeq$`edeq.sick_means_made_shape_numeric_.Wave 3b` <- as.factor(dat.edeq$`edeq.sick_means_made_shape_numeric_.Wave 3b`)     

dat.edeq$`edeq.sick_means_made_shape_numeric_.Wave 4b` <- as.factor(dat.edeq$`edeq.sick_means_made_shape_numeric_.Wave 4b`)     

dat.edeq$`edeq.sick_means_made_shape_numeric_.Wave 6` <- as.factor(dat.edeq$`edeq.sick_means_made_shape_numeric_.Wave 6`)   

dat.edeq$`edeq.sick_means_made_shape_numeric_.Wave 8` <- as.factor(dat.edeq$`edeq.sick_means_made_shape_numeric_.Wave 8`)                 

dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Waveretro_prepan` <- as.factor(dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Waveretro_prepan`)                 

dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Wavebaseline` <- as.factor(dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Wavebaseline`) 

dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Wave 1b` <- as.factor(dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Wave 1b`)     

dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Wave 2b` <- as.factor(dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Wave 2b`)      

dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Wave 3b` <- as.factor(dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Wave 3b`)    

dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Wave 4b` <- as.factor(dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Wave 4b`)   

dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Wave 6` <- as.factor(dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Wave 6`)  

dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Wave 8` <- as.factor(dat.edeq$`edeq.diuretics_laxatives_means_shape_numeric_.Wave 8`)                 

dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Waveretro_prepan` <- as.factor(dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Waveretro_prepan`)

dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Wavebaseline` <- as.factor(dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Wavebaseline`)                 

dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Wave 1b` <- as.factor(dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Wave 1b`)    

dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Wave 2b` <- as.factor(dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Wave 2b`)      

dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Wave 3b` <- as.factor(dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Wave 3b`) 

dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Wave 4b` <- as.factor(dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Wave 4b`)

dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Wave 6` <- as.factor(dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Wave 6`)  

dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Wave 8` <- as.factor(dat.edeq$`edeq.compulsive_driven_burn_calories_numeric_.Wave 8`)                 

```

2. Restructure data into long 
```{r }

dat.edeq <- dat.edeq %>%
  pivot_longer(
    cols = (starts_with("edeq") &
              contains(".Wave")),
    names_to = "wave_edeq",
    values_to = "value") %>%
  separate(wave_edeq, into = c("edeq", "wave"), sep = "_.Wave", remove = TRUE) %>%
  pivot_wider(
     names_from = "edeq",
     values_from = "value")


```


FINAL VARIABLES                                                              

1
"edeq.deliberately_limit_amount_influence_.Waveretro_prepan"                                            
"edeq.deliberately_limit_amount_influence_.Wavebaseline"  
"edeq.deliberately_limit_amount_influence_.Wave 1b"                          
"edeq.deliberately_limit_amount_influence_.Wave 2b"
"edeq.deliberately_limit_amount_influence_.Wave 3b" 
"edeq.deliberately_limit_amount_influence_.Wave 4b"                                                    
"edeq.deliberately_limit_amount_influence_.Wave 8"  
"edeq.deliberately_limit_amount_influence_.Wave 6"  

2
"edeq.calories_made_body_shape_.Waveretro_prepan"  
"edeq.calories_made_body_shape_.Wavebaseline"                                
"edeq.calories_made_body_shape_.Wave 1b"                                     
"edeq.calories_made_body_shape_.Wave 2b"                                                                          
"edeq.calories_made_body_shape_.Wave 4b
"edeq.calories_made_body_shape_.Wave 8" 
"edeq.calories_made_body_shape_.Wave 3b"
"edeq.calories_made_body_shape_.Wave 6"                                      

3
"edeq.weight_influenced_person_.Waveretro_prepan"
"edeq.weight_influenced_person_.Wavebaseline" 
"edeq.weight_influenced_person_.Wave 1b"                                     
"edeq.weight_influenced_person_.Wave 2b" 
"edeq.weight_influenced_person_.Wave 3b"  
"edeq.weight_influenced_person_.Wave 4b"                                                                            
"edeq.weight_influenced_person_.Wave 8"
"edeq.weight_influenced_person_.Wave 6"

4
"edeq.dissatisfied_shape_weight_.Waveretro_prepan" 
"edeq.dissatisfied_shape_weight_.Wavebaseline" 
"edeq.dissatisfied_shape_weight_.Wave 3b"
"edeq.dissatisfied_shape_weight_.Wave 1b"                                    
"edeq.dissatisfied_shape_weight_.Wave 2b"                                                                         
"edeq.dissatisfied_shape_weight_.Wave 4b"                                                                          
"edeq.dissatisfied_shape_weight_.Wave 8" 
"edeq.dissatisfied_shape_weight_.Wave 6"

5
"edeq.eating_behaviours_distressed_concerns_.Waveretro_prepan"       
"edeq.eating_behaviours_distressed_concerns_.Wavebaseline"
"edeq.eating_behaviours_distressed_concerns_.Wave 1b"                        
"edeq.eating_behaviours_distressed_concerns_.Wave 2b"
"edeq.eating_behaviours_distressed_concerns_.Wave 3b"
"edeq.eating_behaviours_distressed_concerns_.Wave 4b"
"edeq.eating_behaviours_distressed_concerns_.Wave 6"
"edeq.eating_behaviours_distressed_concerns_.Wave 8"

6
"edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Waveretro_prepan"                  
"edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wavebaseline"   
"edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 1b"        
"edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 2b" 
"edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 3b"
"edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 4b"
"edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 6"
"edeq.actively_been_monitoring_your_shape_or_weight_numeric_.Wave 8"

7
"edeq.regard_lost_control_eaten_numeric_.Waveretro_prepan"  
"edeq.regard_lost_control_eaten_numeric_.Wavebaseline"                                                 
"edeq.regard_lost_control_eaten_numeric_.Wave 1b"                            
"edeq.regard_lost_control_eaten_numeric_.Wave 2b" 
"edeq.regard_lost_control_eaten_numeric_.Wave 3b"
"edeq.regard_lost_control_eaten_numeric_.Wave 4b"
"edeq.regard_lost_control_eaten_numeric_.Wave 6"
"edeq.regard_lost_control_eaten_numeric_.Wave 8"   

8
"edeq.sick_means_made_shape_numeric_.Waveretro_prepan"                             
"edeq.sick_means_made_shape_numeric_.Wavebaseline"  
"edeq.sick_means_made_shape_numeric_.Wave 1b"                                
"edeq.sick_means_made_shape_numeric_.Wave 2b"
"edeq.sick_means_made_shape_numeric_.Wave 3b"
"edeq.sick_means_made_shape_numeric_.Wave 4b
"edeq.sick_means_made_shape_numeric_.Wave 6"                                 
"edeq.sick_means_made_shape_numeric_.Wave 8"

9
"edeq.diuretics_laxatives_means_shape_numeric_.Waveretro_prepan"       
"edeq.diuretics_laxatives_means_shape_numeric_.Wavebaseline" 
"edeq.diuretics_laxatives_means_shape_numeric_.Wave 1b"                      
"edeq.diuretics_laxatives_means_shape_numeric_.Wave 2b"
"edeq.diuretics_laxatives_means_shape_numeric_.Wave 3b"
"edeq.diuretics_laxatives_means_shape_numeric_.Wave 4b"
"edeq.diuretics_laxatives_means_shape_numeric_.Wave 6"
"edeq.diuretics_laxatives_means_shape_numeric_.Wave 8"

10
"edeq.compulsive_driven_burn_calories_numeric_.Waveretro_prepan"
"edeq.compulsive_driven_burn_calories_numeric_.Wavebaseline" 
"edeq.compulsive_driven_burn_calories_numeric_.Wave 1b"                      
"edeq.compulsive_driven_burn_calories_numeric_.Wave 2b"
"edeq.compulsive_driven_burn_calories_numeric_.Wave 3b"
"edeq.compulsive_driven_burn_calories_numeric_.Wave 4b"
"edeq.compulsive_driven_burn_calories_numeric_.Wave 6"
"edeq.compulsive_driven_burn_calories_numeric_.Wave 8"

11
"edeq.nibbled_picked_snacks_grazed_.Waveretro_prepan"                                                   
"edeq.nibbled_picked_snacks_grazed_.Wavebaseline"    
"edeq.nibbled_picked_snacks_grazed_.Wave 1b"                                 
"edeq.nibbled_picked_snacks_grazed_.Wave 2b" 
"edeq.nibbled_picked_snacks_grazed_.Wave 3b"
"edeq.nibbled_picked_snacks_grazed_.Wave 4b"
"edeq.nibbled_picked_snacks_grazed_.Wave 6"
"edeq.nibbled_picked_snacks_grazed_.Wave 8"

12
"edeq.felt_anxious_blue_bored.1_.Waveretro_prepan"     
"edeq.felt_anxious_blue_bored.1_.Wavebaseline"                                  
"edeq.felt_anxious_blue_bored.1_.Wave 1b"                                    
"edeq.felt_anxious_blue_bored.1_.Wave 2b"
"edeq.felt_anxious_blue_bored.1_.Wave 3b"
"edeq.felt_anxious_blue_bored.1_.Wave 4b" 
"edeq.felt_anxious_blue_bored.1_.Wave 6"
"edeq.felt_anxious_blue_bored.1_.Wave 8" 


13
"edeq.felt_anxious_blue_bored_.Wavebaseline"     
"edeq.felt_anxious_blue_bored_.Waveretro_prepan"  
"edeq.felt_anxious_blue_bored_.Wave 1b"                                      
"edeq.felt_anxious_blue_bored_.Wave 2b"
"edeq.felt_anxious_blue_bored_.Wave 3b"
"edeq.felt_anxious_blue_bored_.Wave 4b"
"edeq.felt_anxious_blue_bored_.Wave 6"
"edeq.felt_anxious_blue_bored_.Wave 8"     

Drop empty factor levels across all columns 
```{r}

dat.edeq <-  droplevels(dat.edeq)

```

##PLOTS - On how many of the past 28 days: Have you been deliberately trying to limit the amount of food you eat to influence your shape or weight ?

#1. Get rid of NAs and change taf to factor
```{r}
#get rid of nas
dat.no.nas <- dat.edeq[!is.na(dat.edeq$edeq.deliberately_limit_amount_influence),]

```

#1. Change wave to factor and re-order
```{r}

# change order of wave factor 1
dat.no.nas <- dat.no.nas %>%
 mutate(wave_factor = fct_relevel(wave,
                                  "retro_prepan",
                                  "baseline",
                                  "1b",
                                  "2b",
                           "3b",
                           "4b",
                           "6",
                           "8"))


#Check that this worked

summary(dat.no.nas$wave_factor)
```

#4. Rename waves to dates
```{r}

##Rename waves
#levels(dat.no.nas$wave_factor)[1] <- "test"


```


#5. Format data to plot
```{r}
#get data in format to plot
dat_plot <- dat.no.nas %>%
  group_by(wave_factor) %>%
  dplyr::summarise(wcount = table(edeq.deliberately_limit_amount_influence) / sum(table(edeq.deliberately_limit_amount_influence))) %>%
  ungroup() %>%
  mutate(edeq.deliberately_limit_amount_influence = rep(levels(dat.no.nas[["edeq.deliberately_limit_amount_influence"]]),
                    length(levels(dat.no.nas[["wave_factor"]]))))


```

6. Change edeq variable to ordered factor
```{r}
dat_plot <- dat_plot %>%
  mutate(edeq.deliberately_limit_amount_influence = fct_relevel(edeq.deliberately_limit_amount_influence,
                           "No days",
                           "1-4 days",
                           "5-10 days",
                          "11-16 days",
                          "17-22 days",
                          "23-27 days",
                          "Every day"))


```


7. PLOT ! 
```{r}
ggplot(dat_plot,
       aes(x = edeq.deliberately_limit_amount_influence,
           y = wcount,
           fill = wave_factor)) +
  geom_bar(aes(group = wave_factor),
           stat = "identity",
           position = "dodge",
           colour = "black") + 
  scale_y_continuous(labels = scales::percent)


```






