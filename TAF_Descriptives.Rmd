---
title: "TAF_descriptives"
author: "Helena Davies"
date: "08/03/2021"
output: html_document
---


```{r Setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      comment=NA,
                      prompt=FALSE,
                      cache=FALSE)
```

Delete everything in your global environment
```{r Delete everything in your global environment}
remove(list = ls())
```

#### Call in library script

```{r source files}
source("./libraries.R")
```

### Read in TAF data
```{r}
dat.taf <- readRDS(file = "../data_cleaned/dat.taf.rds")
dim(dat.taf)
colnames(dat.taf)

```

##Exclude participants who are missing for EVERY taf variable (i.e., retroprepan, baseline, and every wave)
```{r}
##Remove participants who have ALL missing data
dat.taf.all.missing <- dat.taf %>%
  filter(
           is.na(taf.felt_weeks_past.1_.Wavebaseline) &
           is.na(taf.pandemic_felt_.Wavebaseline) &
           is.na(taf.meant_life_end_weeks_.Wavebaseline) &
           is.na(taf.worth_living_life_people_.Wavebaseline) &
           is.na(taf.felt_weeks_past_.Wavebaseline) &
           is.na(taf.pandemic_felt.1_.Wavebaseline) &
           is.na(taf.meant_end_life_pandemic_.Wavebaseline) &
           is.na(`taf.worth_living_life_people_.Wave 1a`) &
           is.na(`taf.worth_living_life_people_.Wave 1a`) &
           is.na(`taf.worth_living_life_people_.Wave 1b`) &
           is.na(`taf.worth_living_life_people_.Wave 2a`) &
           is.na(`taf.worth_living_life_people_.Wave 2b`) &
           is.na(`taf.worth_living_life_people_.Wave 3a`) &
           is.na(`taf.worth_living_life_people_.Wave 3b`) &
           is.na(`taf.worth_living_life_people_.Wave 4a`) &
           is.na(`taf.worth_living_life_people_.Wave 4b`) &
           is.na(`taf.worth_living_life_people_.Wave 5`) &
           is.na(`taf.worth_living_life_people_.Wave 6`) &
           is.na(`taf.worth_living_life_people_.Wave 7`) &
           is.na(`taf.worth_living_life_people_.Wave 8`) &
           is.na(`taf.felt_weeks_past_.Wave 1a`) &
           is.na(`taf.felt_weeks_past_.Wave 1b`) &
           is.na(`taf.felt_weeks_past_.Wave 2a`) &
           is.na(`taf.felt_weeks_past_.Wave 2b`) &
           is.na(`taf.felt_weeks_past_.Wave 3a`) &
           is.na(`taf.felt_weeks_past_.Wave 3b`) &
           is.na(`taf.felt_weeks_past_.Wave 4a`) &
           is.na(`taf.felt_weeks_past_.Wave 4b`) &
           is.na(`taf.felt_weeks_past_.Wave 5`) &
           is.na(`taf.felt_weeks_past_.Wave 6`) &
           is.na(`taf.felt_weeks_past_.Wave 7`) &
           is.na(`taf.felt_weeks_past_.Wave 8`) &
           is.na(`taf.have_you_contemplated_harming_yourself_.Wave 1a`) &
           is.na(`taf.have_you_contemplated_harming_yourself_.Wave 1b`) &
           is.na(`taf.have_you_contemplated_harming_yourself_.Wave 2a`) &
           is.na(`taf.have_you_contemplated_harming_yourself_.Wave 2b`) &
           is.na(`taf.have_you_contemplated_harming_yourself_.Wave 3a`) &
           is.na(`taf.have_you_contemplated_harming_yourself_.Wave 3b`) &
           is.na(`taf.have_you_contemplated_harming_yourself_.Wave 4a`) &
           is.na(`taf.have_you_contemplated_harming_yourself_.Wave 4b`) &
           is.na(`taf.have_you_contemplated_harming_yourself_.Wave 5`) &
           is.na(`taf.have_you_contemplated_harming_yourself_.Wave 6`) &
           is.na(`taf.have_you_contemplated_harming_yourself_.Wave 7`) &
           is.na(`taf.have_you_contemplated_harming_yourself_.Wave 8`) &
           is.na(`taf.felt_weeks_past.1_.Wave 1a`) &
           is.na(`taf.felt_weeks_past.1_.Wave 1b`) &
           is.na(`taf.felt_weeks_past.1_.Wave 2a`) &
           is.na(`taf.felt_weeks_past.1_.Wave 2b`) &
           is.na(`taf.felt_weeks_past.1_.Wave 3a`) &
           is.na(`taf.felt_weeks_past.1_.Wave 3b`) &
           is.na(`taf.felt_weeks_past.1_.Wave 4a`) &
           is.na(`taf.felt_weeks_past.1_.Wave 4b`) &
           is.na(`taf.felt_weeks_past.1_.Wave 5`) &
           is.na(`taf.felt_weeks_past.1_.Wave 6`) &
           is.na(`taf.felt_weeks_past.1_.Wave 7`) &
           is.na(`taf.felt_weeks_past.1_.Wave 8`) &
             is.na(`taf.meant_life_end_weeks_.Wave 1a`) &
             is.na(`taf.meant_life_end_weeks_.Wave 1b`) &
             is.na(`taf.meant_life_end_weeks_.Wave 2a`) &
             is.na(`taf.meant_life_end_weeks_.Wave 2b`) &
             is.na(`taf.meant_life_end_weeks_.Wave 3a`) &
             is.na(`taf.meant_life_end_weeks_.Wave 3b`) &
             is.na(`taf.meant_life_end_weeks_.Wave 4a`) &
             is.na(`taf.meant_life_end_weeks_.Wave 4b`) &
             is.na(`taf.meant_life_end_weeks_.Wave 5`) &
             is.na(`taf.meant_life_end_weeks_.Wave 6`) &
             is.na(`taf.meant_life_end_weeks_.Wave 7`) &
             is.na(`taf.meant_life_end_weeks_.Wave 8`)
           )

nrow(dat.taf.all.missing)
```

```{r}
##Filter out those with ALL missing data in main dataset
'%!in%' <- function(x,y)!('%in%'(x,y))

dat.taf <- dat.taf %>%
  filter(ID %!in% dat.taf.all.missing$ID)

nrow(dat.taf) ##TOTAL == 33,067

```

##Demographics - TAF
#cohort
```{r}
freq(dat.taf$cohort_name)
```

#age
```{r}
freq(dat.taf$age_category)
```

#gender
```{r}
freq(dat.taf$gender)
```

#ethnicity
```{r}
freq(dat.taf$ethnicity)
##Lots of missing data from NBR - have checked ethnicity source script and seems that the original dataset contains a lot of NAs...

##Check which cohort missing data is from
x <- dat.taf %>%
  filter(is.na(ethnicity))

freq(x$cohort_name)

```

#highest level of education
```{r}
freq(dat.taf$highest_education)

##Check which cohort missing data is from
x <- dat.taf %>%
  filter(is.na(highest_education))

freq(x$cohort_name)

```

#Self-reported diagnoses
##Depression
```{r}
freq(dat.taf$depressive_disorders_numeric) 

```

##Mania
```{r}
freq(dat.taf$mhd.mania_hypomania_bipolar_or_manicdepression_numeric) 

```

##anxiety
```{r}
  freq(dat.taf$anxiety_disorders_numeric)

```

##eating disorders
```{r}
freq(dat.taf$eating_disorders_numeric)

```

##OCD
```{r}
  freq(dat.taf$obsessive_compulsive_disorders_numeric)

```

##Psychotic disorder
```{r}
  freq(dat.taf$psychotic_disorders_numeric)
```

##PTSD
```{r eval=FALSE, include=FALSE}
  freq(dat.taf$mhd.posttraumatic_stress_disorder_ptsd_numeric
```
##Autism
```{r}
freq(dat.taf$autism_spectrum_disorder_numeric)
```

##ADHD
```{r}
  freq(dat.taf$mhd.attention_deficit_hyperactivity_disorder_numeric)

```

